%div.panel.panel-info(ng-controller="RecordListController")
  %div.panel-heading
    %img.img-rounded(src="assets/phone-icon.png")
    %button.btn.btn-sm.btn-warning(ng-click="clearQuery()")
      %span.glyphicon.glyphicon-remove
      %span Показать всех
    %a.btn.btn-sm.btn-info(href="/admin")
      %span Панель управления
      %span.glyphicon.glyphicon-log-in
    %span#heading.pull-right
      %span Primepress Directory

  %div.panel-body
    %table.table.table-striped
      %thead
        %tr
          %th
            %div
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'name'; reverse=!reverse")
              %input.form-control(ng-model="search.name" placeholder="Имя")
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'department'; reverse=!reverse")
              %input.form-control(ng-model="search.department" placeholder="Отдел")
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'title'; reverse=!reverse")
              %input.form-control(ng-model="search.title" placeholder="Должность")
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'mail'; reverse=!reverse")
              %input.form-control(ng-model="search.mail" placeholder="E-Mail")
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'phone'; reverse=!reverse")
              %input.form-control(ng-model="search.phone" placeholder="Телефон")
          %th
            %div.input-group
              %span.input-group-addon.glyphicon.glyphicon-sort(ng-click="sorter = 'mobile'; reverse=!reverse")
              %input.form-control(ng-model="search.mobile" placeholder="Мобильный телефон")
      %tbody
        %tr(ng-repeat="record in records | filter:departments_filter | filter:search | orderBy:sorter:reverse")
          %td
            %img(src="{{record.ident}}")
          %td
            {{record.name}}
            %p(ng-show="record.birthdate")
              {{record.birthdate}}
          %td
            %a(ng-click="departments_filter.department = record.department" href="#") {{ record.department}}
          %td
            {{record.title}}
          %td
            %a{:href => "mailto:{{record.mail}}" } {{record.mail}}
          %td
            {{record.phone}}
          %td
            {{record.mobile}}